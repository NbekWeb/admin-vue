{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from '@/router';\n\n// Umumiy axios instance\nexport const axiosInstance = axios.create({\n  baseURL: `https://v.zesu.ru/`,\n  timeout: 20000,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n});\n\n// Auth uchun alohida instance\nexport const axiosAuthInstance = axios.create({\n  baseURL: `https://v.zesu.ru/`,\n  timeout: 20000,\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json'\n  }\n});\n\n// Default response structure\nexport function getResponse_DEFAULT() {\n  return {\n    content: [],\n    size: 10,\n    page: 1,\n    totalPages: 0,\n    totalElements: 0,\n    number: 0\n  };\n}\n\n// Interceptor — axiosInstance\naxiosInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (config.url === '/auth/v1/login') {\n    return config;\n  }\n  if (config.url.includes('NO_TOKEN')) {\n    config.headers.authorization = '';\n  } else if (token) {\n    config.headers.authorization = `Bearer ${token}`;\n  }\n  config.url = config.url.replace('/NO_TOKEN', '');\n  return config;\n}, error => Promise.reject(error));\naxiosInstance.interceptors.response.use(response => response, error => {\n  if (error.response?.status === 401 || error.response?.status === 403) {\n    localStorage.removeItem('token');\n    router.push('/login');\n  }\n  return Promise.reject(error);\n});\n\n// Interceptor — axiosAuthInstance\naxiosAuthInstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (config.url === '/auth/v1/login') {\n    return config;\n  }\n  if (config.url.includes('NO_TOKEN')) {\n    config.headers.authorization = '';\n  } else if (token) {\n    config.headers.authorization = `Bearer ${token}`;\n  }\n  config.url = config.url.replace('/NO_TOKEN', '');\n  return config;\n}, error => Promise.reject(error));\naxiosAuthInstance.interceptors.response.use(response => response, error => {\n  // if (error.response?.status === 401 || error.response?.status === 403) {\n  //    localStorage.removeItem('token')\n  //    router.push('/login')\n  // }\n  return Promise.reject(error);\n});\n7;","map":{"version":3,"names":["axios","router","axiosInstance","create","baseURL","timeout","headers","Accept","axiosAuthInstance","getResponse_DEFAULT","content","size","page","totalPages","totalElements","number","interceptors","request","use","config","token","localStorage","getItem","url","includes","authorization","replace","error","Promise","reject","response","status","removeItem","push"],"sources":["C:/Users/UMIDJON/Desktop/default2/src/service/axios.js"],"sourcesContent":["import axios from 'axios'\r\nimport router from '@/router'\r\n\r\n// Umumiy axios instance\r\nexport const axiosInstance = axios.create({\r\n   baseURL: `https://v.zesu.ru/`,\r\n   timeout: 20000,\r\n   headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n   }\r\n})\r\n\r\n// Auth uchun alohida instance\r\nexport const axiosAuthInstance = axios.create({\r\n   baseURL: `https://v.zesu.ru/`,\r\n   timeout: 20000,\r\n   headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n   }\r\n})\r\n\r\n// Default response structure\r\nexport function getResponse_DEFAULT() {\r\n   return {\r\n      content: [],\r\n      size: 10,\r\n      page: 1,\r\n      totalPages: 0,\r\n      totalElements: 0,\r\n      number: 0\r\n   }\r\n}\r\n\r\n// Interceptor — axiosInstance\r\naxiosInstance.interceptors.request.use(\r\n   (config) => {\r\n      const token = localStorage.getItem('token')\r\n\r\n      if (config.url === '/auth/v1/login') {\r\n         return config\r\n      }\r\n\r\n      if (config.url.includes('NO_TOKEN')) {\r\n         config.headers.authorization = ''\r\n      } else if (token) {\r\n         config.headers.authorization = `Bearer ${token}`\r\n      }\r\n\r\n      config.url = config.url.replace('/NO_TOKEN', '')\r\n      return config\r\n   },\r\n   (error) => Promise.reject(error)\r\n)\r\n\r\naxiosInstance.interceptors.response.use(\r\n   (response) => response,\r\n   (error) => {\r\n      if (error.response?.status === 401 || error.response?.status === 403) {\r\n         localStorage.removeItem('token')\r\n         router.push('/login')\r\n      }\r\n      return Promise.reject(error)\r\n   }\r\n)\r\n\r\n// Interceptor — axiosAuthInstance\r\naxiosAuthInstance.interceptors.request.use(\r\n   (config) => {\r\n      const token = localStorage.getItem('token')\r\n\r\n      if (config.url === '/auth/v1/login') {\r\n         return config\r\n      }\r\n\r\n      if (config.url.includes('NO_TOKEN')) {\r\n         config.headers.authorization = ''\r\n      } else if (token) {\r\n         config.headers.authorization = `Bearer ${token}`\r\n      }\r\n\r\n      config.url = config.url.replace('/NO_TOKEN', '')\r\n      return config\r\n   },\r\n   (error) => Promise.reject(error)\r\n)\r\n\r\naxiosAuthInstance.interceptors.response.use(\r\n   (response) => response,\r\n   (error) => {\r\n      // if (error.response?.status === 401 || error.response?.status === 403) {\r\n      //    localStorage.removeItem('token')\r\n      //    router.push('/login')\r\n      // }\r\n      return Promise.reject(error)\r\n   }\r\n)\r\n7"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}